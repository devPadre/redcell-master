<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Tutorial on Redcell Talent Accelerator</title>
        <link>https://redcell-191816.firebaseapp.com/series/tutorial/</link>
        <description>Recent content in Tutorial on
            Redcell Talent Accelerator
        </description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Redcell, Pittsburgh, PA</copyright>
        <lastBuildDate>
            Fri, 23 Jun 2017 00:00:00 +0000
        </lastBuildDate>
        <atom:link href="/series/tutorial/" rel="self" type="application/rss+xml"/>
        
        <item>
            <title>GitHub API Authentication using OAuth 2.0</title>
            <link>https://redcell-191816.firebaseapp.com/blog/oauth2-github-api/</link>
            <pubDate>
                Fri, 23 Jun 2017 00:00:00 +0000
            </pubDate>
            
            <guid>https://redcell-191816.firebaseapp.com/blog/oauth2-github-api/</guid>
            <description>
                


&lt;p&gt;OAuth 2.0 has been a supported authentication scheme in Insomnia for some time now but ‚Äì if
you are new to OAuth ‚Äì can still be quite complicated.
This post walks through an example using OAuth 2.0 to authenticate and create a
repository on GitHub using the &lt;a href=&#34;https://developer.github.com/v3/&#34;&gt;GitHub API&lt;/a&gt;.&lt;/p&gt;

&lt;p class=&#34;notice info&#34;&gt;
If you don&#39;t already have a GitHub OAuth application registered for your account, you can
create a one from &lt;a href=&#34;https://github.com/settings/developers&#34;&gt;Developer Settings&lt;/a&gt;
Note, &#34;Callback URL&#34; can be whatever you want for this tutorial.
&lt;/p&gt;

&lt;h2 id=&#34;gathering-oauth-credentials&#34;&gt;Gathering OAuth Credentials&lt;/h2&gt;

&lt;p&gt;The GitHub API uses the OAuth &lt;em&gt;Authorization Code&lt;/em&gt; grant type, which requires five things
from you. Note that you don&amp;rsquo;t need to know what a &lt;em&gt;grant type&lt;/em&gt; is to follow along.&lt;/p&gt;

&lt;dl&gt;
&lt;dt&gt;&lt;strong&gt;Client ID&lt;/strong&gt;, &lt;strong&gt;Client Secret&lt;/strong&gt;, and &lt;strong&gt;Callback URL&lt;/strong&gt;:&lt;/dt&gt;
&lt;dd&gt;These are specific to the GitHub OAuth application and can be found on its
&lt;a href=&#34;https://github.com/settings/developers&#34;&gt;details page&lt;/a&gt;. The &lt;strong&gt;Callback URL&lt;/strong&gt; is often
optional but we&amp;rsquo;re going to specify it anyway in the name of completeness.&lt;/dd&gt;
&lt;dt&gt;&lt;strong&gt;Authorization URL&lt;/strong&gt; and &lt;strong&gt;Access Token URL&lt;/strong&gt;:&lt;/dt&gt;
&lt;dd&gt;These are static values, listed on the &lt;a href=&#34;https://developer.github.com/apps/building-integrations/setting-up-and-registering-oauth-apps/about-authorization-options-for-oauth-apps/&#34;&gt;GitHub API Docs&lt;/a&gt;.
As a convenience, Insomnia will autocomplete these while you type them and I will also include
them here: &lt;br&gt;
&lt;code&gt;http://github.com/login/oauth/authorize&lt;/code&gt; &lt;br&gt;
&lt;code&gt;https://github.com/login/oauth/access_token&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;This following step is optional, but I recommend specifying the application-specific values
as &lt;a href=&#34;https://redcell-191816.firebaseapp.com/documentation/environment-variables/&#34;&gt;Environment Variables&lt;/a&gt; so they can easily be reused
or modified. For my setup, I have created a sub environment called &amp;ldquo;Test Application&amp;rdquo; and included
the following JSON value:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;#34;client_id&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fa122270cdf09954296d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;#34;client_secret&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;274e6d43420c73d9c89f52a4a99a9731e6bdb96c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;#34;redirect_url&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://insomnia.rest&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&#34;notice warn&#34;&gt;
Don&#39;t forget to activate your new environment in the sidebar after creating it
&lt;/p&gt;

&lt;p&gt;Now that we have everything we need, let&amp;rsquo;s start setting up a request.&lt;/p&gt;

&lt;h2 id=&#34;setting-up-the-request&#34;&gt;Setting Up The Request&lt;/h2&gt;

&lt;p&gt;Most read-only endpoints on GitHub don&amp;rsquo;t require authentication (not very useful for
demoing OAuth) so we&amp;rsquo;ll be using the
&lt;a href=&#34;https://developer.github.com/v3/repos/#create&#34;&gt;create repository&lt;/a&gt; endpoint for this
demonstration.&lt;/p&gt;

&lt;p&gt;To get started, open Insomnia and create a new request by the name of &amp;ldquo;Create Repository&amp;rdquo;.
Then, copy and paste the following curl command into the URL bar.&lt;/p&gt;

&lt;p class=&#34;notice info&#34;&gt;
We&#39;re making use of Insomnia&#39;s &lt;strong&gt;import from Curl&lt;/strong&gt; feature here to 
save on typing.
&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;curl --request POST &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --url &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://api.github.com/user/repos&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --header &lt;span class=&#34;s1&#34;&gt;&amp;#39;content-type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;name&amp;#34;: &amp;#34;insomnia-test-repo&amp;#34;,
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;description&amp;#34;: &amp;#34;Test repo for Insomnia tutorial&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should end up with a request that looks like this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://redcell-191816.firebaseapp.com/images/blog/github-oauth/request.png&#34; alt=&#34;Imported request&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;setting-up-oauth-2-0&#34;&gt;Setting up OAuth 2.0&lt;/h2&gt;

&lt;p&gt;If you sent the request now, before setting up authentication, you would receive a
&lt;code&gt;401 Unauthorized&lt;/code&gt; response. This is because the &lt;code&gt;POST /user/repos&lt;/code&gt; endpoint requires
an OAuth token to be sent with the request. However, obtaining an OAuth token manually is not
easy and requires multiple, complicated steps. This is where Insomnia into play.&lt;/p&gt;

&lt;p&gt;Insomnia deals with the complex task of obtaining and managing OAuth tokens so you don&amp;rsquo;t
have to. You don&amp;rsquo;t even need to understand how it works ‚Äì although I still recommend you learn. üë©‚Äçüíª&lt;/p&gt;

&lt;p&gt;Now, back to the request. Select the Auth tab of your &amp;ldquo;Create Repository&amp;rdquo; request and change
the authentication type to &amp;ldquo;OAuth 2&amp;rdquo;. After doing that, fill out the values you collected earlier.
If you made use of environment variables, it should look something like this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://redcell-191816.firebaseapp.com/images/blog/github-oauth/authentication-settings.png&#34; alt=&#34;Fill out authentication settings&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Congratulations! The request is now ready to be sent. üòÑüëèü§ñ&lt;/p&gt;

&lt;h2 id=&#34;sending-the-request&#34;&gt;Sending the Request&lt;/h2&gt;

&lt;p class=&#34;notice warn&#34;&gt;
Submitting the following request will create a new repository on your GitHub account. You can
delete the respository from the GitHub website later.
&lt;/p&gt;

&lt;p&gt;As soon as you send the request, Insomnia will detect that a token has not yet been obtained and
start the authentication process. You will be prompted to sign in with your GitHub
credentials and authorize the OAuth application to act on your behalf.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://redcell-191816.firebaseapp.com/images/blog/github-oauth/authorize.png&#34; alt=&#34;Allow application access&#34; /&gt;&lt;/p&gt;

&lt;p&gt;After logging in, the token will be extracted from the resulting URL and stored in Insomnia.
The request will then be sent using the newly acquired token. If all went well
you should see a successful &lt;code&gt;201 Created&lt;/code&gt; response with information about your newly
created repository.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://redcell-191816.firebaseapp.com/images/blog/github-oauth/response.png&#34; alt=&#34;Create repository response&#34; /&gt;&lt;/p&gt;

&lt;p class=&#34;notice info&#34;&gt;
Make use of Insomnia&#39;s response filtering by entering a JSONPath query such as
&lt;code&gt;$.owner.login&lt;/code&gt; below the response body
&lt;/p&gt;

&lt;h2 id=&#34;more-about-oauth-2-0&#34;&gt;More About OAuth 2.0&lt;/h2&gt;

&lt;p&gt;Even though Insomnia handles most of the complexities of OAuth for you, there are a
few notable things that may come in handy.&lt;/p&gt;

&lt;h3 id=&#34;viewing-the-authorization-header&#34;&gt;Viewing the Authorization Header&lt;/h3&gt;

&lt;p&gt;If you take a look at the Timeline tab, you will see the &lt;code&gt;Authorization&lt;/code&gt; header that
was sent with the request. The value of the header &lt;code&gt;Bearer &amp;lt;TOKEN&amp;gt;&lt;/code&gt; contains the token that
Insomnia extracted during the login process. This token will also appear in the Auth
tab of the request, where you can either refetch a new token or clear the existing one.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://redcell-191816.firebaseapp.com/images/blog/github-oauth/timeline.png&#34; alt=&#34;Timeline view&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;expiring-tokens-and-refresh-tokens&#34;&gt;Expiring Tokens and Refresh Tokens&lt;/h3&gt;

&lt;p&gt;Some OAuth 2.0 APIs make use of expiring tokens and/or refresh tokens. If the API token
received has an expiry, Insomnia will show it at the bottom of the Auth tab. If a token expires,
Insomnia will automatically try to refresh it when the next request. You can also trigger a
refresh manually from the Auth tab.&lt;/p&gt;

&lt;h3 id=&#34;other-grant-types&#34;&gt;Other Grant Types&lt;/h3&gt;

&lt;p&gt;OAuth 2.0 defines four &lt;a href=&#34;https://tools.ietf.org/html/rfc6749#section-1.3&#34;&gt;grant types&lt;/a&gt;
that can be used to fetch a token, each to facilitate different use cases.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Authorization Code&lt;/li&gt;
&lt;li&gt;Implicit&lt;/li&gt;
&lt;li&gt;Resource Owner Password Credentials&lt;/li&gt;
&lt;li&gt;Client Credentials&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Insomnia supports all of these grant types and will take care of all the complexities so you
don&amp;rsquo;t have to.&lt;/p&gt;

&lt;p class=&#34;notice warn&#34;&gt;
OAuth 2.0 has the ability for custom grant types, but these are not 
yet supported
&lt;/p&gt;

&lt;h3 id=&#34;login-window-cookies&#34;&gt;Login Window Cookies&lt;/h3&gt;

&lt;p&gt;Currently, the OAuth 2.0 login window uses a single global session that is cleared on every
restart of the app. That means, if you already signed in with one GitHub account, it won&amp;rsquo;t need
ask you again. However, this also means that, if you want to switch GitHub accounts, you will
need to restart the app to clear the current session.&lt;/p&gt;

&lt;h2 id=&#34;wrap-up&#34;&gt;Wrap-Up&lt;/h2&gt;

&lt;p&gt;There have been a significant number of users asking for help with the OAuth 2.0 process.
Hopefully this post was able to clear up some of the more common issues around the OAuth process.
Even if you are not interacting with the GitHub API specifically, the information covered
here will work for most other OAuth 2.0 APIs.&lt;/p&gt;


&lt;p class=&#34;center&#34;&gt;
  
  &lt;a href=&#34;https://redcell-191816.firebaseapp.com/download&#34; class=&#34;button __download-link&#34;&gt;Download&lt;/a&gt;

  &amp;nbsp;
  &lt;a href=&#34;https://github.com/getinsomnia/insomnia/releases/voauth2-github-api&#34;
     class=&#34;button button--no-outline&#34;
     target=&#34;_blank&#34;&gt;
    View on GitHub
  &lt;/a&gt;
  
&lt;/p&gt;








            </description>
        </item>
        
    </channel>
</rss>
